<%
  # Usage: render 'shared/case_study_card', case_study: @case_study
  return unless case_study.present?

  external_links = {
    "ai-talk-coach" => "https://aitalkcoach.com",
    "uxpilot" => "https://uxauditapp.com",
    "ux-pilot" => "https://uxauditapp.com",
    "ux-audit-app" => "https://uxauditapp.com",
    "image-scraping-tool" => "https://imagescrapingtool.zelusottomayor.com",
    "website-image-scraper" => "https://imagescrapingtool.zelusottomayor.com",
    "imagesweep" => "https://imagescrapingtool.zelusottomayor.com",
    "image-sweep" => "https://imagescrapingtool.zelusottomayor.com",
    "floating-clock" => "https://floatingclock.zelusottomayor.com",
    "signal-harvester" => "https://signalharvester.com"
  }

  case_study_key = case_study.name.to_s.parameterize
  case_study_url = external_links.fetch(case_study_key, case_study_path(case_study))
  case_study_name = case_study_key == "uxpilot" || case_study_key == "ux-pilot" ? "UX Audit App" : case_study.name
%>

<div class="case-study-card" data-category="<%= case_study.client_type %>">
  <% if case_study.thumbnail.present? %>
    <div class="case-study-thumbnail">
      <%= image_tag case_study.thumbnail, alt: case_study.name, class: "case-study-image" %>
    </div>
  <% elsif case_study.icon.present? %>
    <div class="case-study-icon-wrapper">
      <%= image_tag case_study.icon, alt: case_study.name, class: "case-study-icon" %>
    </div>
  <% end %>

  <div class="case-study-content">
    <div class="case-study-type-badge">
      <%= case_study.client_type.titleize %>
    </div>

    <h3 class="case-study-title"><%= case_study_name %></h3>

    <% if case_study.tagline.present? %>
      <p class="case-study-tagline"><%= case_study.tagline %></p>
    <% end %>

    <% if case_study.key_metrics.any? %>
      <div class="case-study-metrics">
        <% case_study.key_metrics.take(2).each do |metric| %>
          <span class="metric-pill"><%= metric %></span>
        <% end %>
      </div>
    <% end %>

    <%= link_to "View case study â†’", case_study_url, class: "case-study-link" %>
  </div>
</div>
