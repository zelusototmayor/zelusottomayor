<% content_for :title, "How Our Outbound System Works | Ze Lu Sottomayor" %>
<% content_for :meta_description, "A visual walkthrough of our outbound automation system — from ICP definition to CRM integration. See every step of the machine that fills your pipeline." %>

<style>
  /* ── WORKFLOW PAGE ─────────────────────────────────── */

  .wf-hero {
    padding: 100px 0 80px;
    text-align: center;
    background: var(--gradient-hero);
    position: relative;
    overflow: hidden;
  }

  .wf-hero::before {
    content: '';
    position: absolute;
    top: -120px;
    right: -80px;
    width: 400px;
    height: 400px;
    background: radial-gradient(circle, rgba(39, 90, 78, 0.06) 0%, transparent 70%);
    border-radius: 50%;
  }

  .wf-eyebrow {
    display: inline-block;
    font-family: var(--font-mono);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--color-primary);
    background: rgba(39, 90, 78, 0.08);
    border: 1px solid rgba(39, 90, 78, 0.2);
    padding: 6px 18px;
    border-radius: var(--radius-full);
    margin-bottom: 28px;
  }

  .wf-headline {
    font-family: var(--font-display);
    font-size: clamp(2.2rem, 5vw, 3.8rem);
    font-weight: var(--font-weight-extrabold);
    letter-spacing: -0.03em;
    line-height: 1.08;
    color: var(--color-text-primary);
    margin-bottom: 20px;
  }

  .wf-headline em {
    font-style: normal;
    background: var(--gradient-text);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .wf-sub {
    font-family: var(--font-sans);
    font-size: var(--font-size-lg);
    color: var(--color-text-muted);
    max-width: 580px;
    margin: 0 auto;
    line-height: var(--line-height-relaxed);
  }

  /* ── PIPELINE VISUAL ───────────────────────────────── */
  .wf-pipeline {
    padding: 80px 0 96px;
    position: relative;
  }

  .wf-pipeline-label {
    font-family: var(--font-mono);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--color-text-muted);
    text-align: center;
    margin-bottom: 56px;
  }

  /* Vertical timeline layout */
  .wf-timeline {
    position: relative;
    max-width: 800px;
    margin: 0 auto;
  }

  .wf-timeline::before {
    content: '';
    position: absolute;
    left: 40px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: linear-gradient(
      to bottom,
      var(--color-border) 0%,
      var(--color-primary) 15%,
      var(--color-primary) 85%,
      var(--color-accent) 100%
    );
  }

  .wf-step {
    position: relative;
    padding-left: 100px;
    padding-bottom: 56px;
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }

  .wf-step.wf-visible {
    opacity: 1;
    transform: translateY(0);
  }

  .wf-step:last-child {
    padding-bottom: 0;
  }

  /* Timeline node */
  .wf-node {
    position: absolute;
    left: 24px;
    top: 4px;
    width: 34px;
    height: 34px;
    border-radius: 50%;
    background: var(--color-surface);
    border: 3px solid var(--color-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
    font-family: var(--font-mono);
    font-size: 11px;
    font-weight: var(--font-weight-semibold);
    color: var(--color-primary);
    transition: all 0.4s ease;
  }

  .wf-step.wf-visible .wf-node {
    background: var(--color-primary);
    color: #fff;
    box-shadow: 0 0 0 6px rgba(39, 90, 78, 0.12);
  }

  .wf-step:last-child .wf-node {
    border-color: var(--color-accent);
  }

  .wf-step:last-child.wf-visible .wf-node {
    background: var(--color-accent);
    box-shadow: 0 0 0 6px rgba(200, 161, 90, 0.15);
  }

  /* Step card */
  .wf-card {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    padding: 32px 36px;
    transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.3s ease;
  }

  .wf-card:hover {
    border-color: var(--color-primary);
    box-shadow: var(--shadow-lg);
    transform: translateX(4px);
  }

  .wf-step:last-child .wf-card {
    border-color: rgba(200, 161, 90, 0.3);
    background: linear-gradient(135deg, rgba(200, 161, 90, 0.04) 0%, var(--color-surface) 100%);
  }

  .wf-step:last-child .wf-card:hover {
    border-color: var(--color-accent);
  }

  .wf-card-header {
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: 12px;
  }

  .wf-card-icon {
    min-width: 36px;
    height: 36px;
    border-radius: 12px;
    border: 1px solid var(--color-border);
    background: rgba(39, 90, 78, 0.06);
    color: var(--color-primary);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-family: var(--font-mono);
    font-size: 11px;
    font-weight: var(--font-weight-semibold);
    letter-spacing: 0.08em;
    text-transform: uppercase;
    line-height: 1;
  }

  .wf-card-label {
    font-family: var(--font-mono);
    font-size: 11px;
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-text-muted);
  }

  .wf-card-title {
    font-family: var(--font-display);
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-text-primary);
    letter-spacing: -0.02em;
    margin-bottom: 10px;
  }

  .wf-step:last-child .wf-card-title {
    color: var(--color-gold-600, var(--color-accent));
  }

  .wf-card-desc {
    font-family: var(--font-sans);
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    line-height: var(--line-height-relaxed);
    margin: 0;
  }

  .wf-card-detail {
    display: inline-block;
    margin-top: 14px;
    font-family: var(--font-mono);
    font-size: var(--font-size-xs);
    color: var(--color-primary);
    background: rgba(39, 90, 78, 0.06);
    border: 1px solid rgba(39, 90, 78, 0.15);
    padding: 4px 12px;
    border-radius: var(--radius-full);
  }

  .wf-step:last-child .wf-card-detail {
    color: var(--color-accent);
    background: rgba(200, 161, 90, 0.08);
    border-color: rgba(200, 161, 90, 0.2);
  }

  /* ── RESULT STRIP ──────────────────────────────────── */
  .wf-results {
    padding: 64px 0;
    background: var(--color-surface);
    border-top: 1px solid var(--color-border);
    border-bottom: 1px solid var(--color-border);
  }

  .wf-results-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1px;
    background: var(--color-border);
    border-radius: var(--radius-xl);
    overflow: hidden;
    border: 1px solid var(--color-border);
  }

  .wf-result-cell {
    background: var(--color-surface);
    padding: 36px 20px;
    text-align: center;
  }

  .wf-result-num {
    font-family: var(--font-display);
    font-size: 2.5rem;
    font-weight: var(--font-weight-extrabold);
    letter-spacing: -0.04em;
    color: var(--color-primary);
    margin-bottom: 6px;
    line-height: 1;
  }

  .wf-result-label {
    font-family: var(--font-sans);
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    font-weight: var(--font-weight-medium);
  }

  /* ── SYSTEM PROMISE ────────────────────────────────── */
  .wf-promise {
    padding: 80px 0;
  }

  .wf-promise-box {
    background: linear-gradient(135deg, var(--color-ink-900) 0%, var(--color-ink-700) 100%);
    border-radius: var(--radius-xl);
    padding: 56px 48px;
    text-align: center;
  }

  .wf-promise-badge {
    display: inline-block;
    font-family: var(--font-mono);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-accent);
    background: rgba(200, 161, 90, 0.15);
    border: 1px solid rgba(200, 161, 90, 0.3);
    padding: 5px 16px;
    border-radius: var(--radius-full);
    margin-bottom: 24px;
  }

  .wf-promise-headline {
    font-family: var(--font-display);
    font-size: clamp(1.5rem, 3vw, 2.25rem);
    font-weight: var(--font-weight-extrabold);
    letter-spacing: -0.02em;
    color: #fff;
    margin-bottom: 16px;
  }

  .wf-promise-sub {
    font-family: var(--font-sans);
    font-size: var(--font-size-base);
    color: rgba(255, 255, 255, 0.55);
    max-width: 600px;
    margin: 0 auto;
    line-height: var(--line-height-relaxed);
  }

  /* ── CTA ────────────────────────────────────────────── */
  .wf-cta {
    padding: 64px 0 96px;
    text-align: center;
  }

  .wf-cta-headline {
    font-family: var(--font-display);
    font-size: clamp(1.5rem, 3vw, 2rem);
    font-weight: var(--font-weight-extrabold);
    letter-spacing: -0.02em;
    color: var(--color-text-primary);
    margin-bottom: 12px;
  }

  .wf-cta-sub {
    font-family: var(--font-sans);
    color: var(--color-text-muted);
    margin-bottom: 32px;
    max-width: 480px;
    margin-left: auto;
    margin-right: auto;
  }

  .wf-cta-note {
    font-family: var(--font-sans);
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    margin-top: 16px;
  }

  /* ── RESPONSIVE ────────────────────────────────────── */
  @media (max-width: 760px) {
    .wf-hero { padding: 64px 0 56px; }

    .wf-timeline::before { left: 20px; }
    .wf-node { left: 4px; width: 30px; height: 30px; }
    .wf-step { padding-left: 60px; padding-bottom: 40px; }
    .wf-card { padding: 24px 20px; }

    .wf-results-grid { grid-template-columns: repeat(2, 1fr); }
    .wf-promise-box { padding: 36px 24px; }
  }

  @media (max-width: 480px) {
    .wf-results-grid { grid-template-columns: 1fr; }
  }
</style>

<!-- HERO -->
<section class="wf-hero">
  <div class="container container--narrow">
    <span class="wf-eyebrow">System Overview</span>
    <h1 class="wf-headline">
      Your outbound pipeline,<br><em>fully automated</em>
    </h1>
    <p class="wf-sub">
      From finding your ideal customers to booking meetings on your calendar — here's every step of the system we build and run for you.
    </p>
  </div>
</section>

<!-- PIPELINE -->
<section class="wf-pipeline">
  <div class="container">
    <p class="wf-pipeline-label">The 7-step system</p>

    <div class="wf-timeline">

      <div class="wf-step" data-step>
        <div class="wf-node">1</div>
        <div class="wf-card">
          <div class="wf-card-header">
            <span class="wf-card-icon">ICP</span>
            <span class="wf-card-label">Step 01 — You + Us</span>
          </div>
          <h3 class="wf-card-title">ICP Definition</h3>
          <p class="wf-card-desc">
            You tell us who your ideal customers are. We nail the targeting together — industry, company size, geography, job titles, tech stack. This is the foundation everything else is built on.
          </p>
          <span class="wf-card-detail">One-time setup · refined over time</span>
        </div>
      </div>

      <div class="wf-step" data-step>
        <div class="wf-node">2</div>
        <div class="wf-card">
          <div class="wf-card-header">
            <span class="wf-card-icon">SRC</span>
            <span class="wf-card-label">Step 02 — Automated</span>
          </div>
          <h3 class="wf-card-title">Daily Scraping</h3>
          <p class="wf-card-desc">
            Every morning, the system scrapes the web for fresh companies matching your ICP. No recycled databases. No stale Apollo lists. New prospects, every single day.
          </p>
          <span class="wf-card-detail">Runs daily · fully automated</span>
        </div>
      </div>

      <div class="wf-step" data-step>
        <div class="wf-node">3</div>
        <div class="wf-card">
          <div class="wf-card-header">
            <span class="wf-card-icon">AI</span>
            <span class="wf-card-label">Step 03 — AI-Powered</span>
          </div>
          <h3 class="wf-card-title">Personalisation</h3>
          <p class="wf-card-desc">
            AI writes a unique, relevant message for each company — referencing their actual business, recent activity, or pain points. No templates. No "Hi {first_name}" mail merges.
          </p>
          <span class="wf-card-detail">Unique copy per prospect</span>
        </div>
      </div>

      <div class="wf-step" data-step>
        <div class="wf-node">4</div>
        <div class="wf-card">
          <div class="wf-card-header">
            <span class="wf-card-icon">SEND</span>
            <span class="wf-card-label">Step 04 — At Scale</span>
          </div>
          <h3 class="wf-card-title">Outbound Sending</h3>
          <p class="wf-card-desc">
            Emails go out at volume — up to 150 per day per inbox — with proper deliverability, warm-up, and domain rotation already handled. You never touch a send button.
          </p>
          <span class="wf-card-detail">Up to 150 emails/day/inbox</span>
        </div>
      </div>

      <div class="wf-step" data-step>
        <div class="wf-node">5</div>
        <div class="wf-card">
          <div class="wf-card-header">
            <span class="wf-card-icon">SEQ</span>
            <span class="wf-card-label">Step 05 — Automated</span>
          </div>
          <h3 class="wf-card-title">Follow-up Sequences</h3>
          <p class="wf-card-desc">
            No lead is left behind. Automated follow-up sequences run on a cadence — spacing, timing, and messaging all optimised. Replies are detected and sequences stop automatically.
          </p>
          <span class="wf-card-detail">Multi-step sequences · smart stops</span>
        </div>
      </div>

      <div class="wf-step" data-step>
        <div class="wf-node">6</div>
        <div class="wf-card">
          <div class="wf-card-header">
            <span class="wf-card-icon">DATA</span>
            <span class="wf-card-label">Step 06 — Visibility</span>
          </div>
          <h3 class="wf-card-title">Real-Time Dashboard</h3>
          <p class="wf-card-desc">
            You see everything: emails sent, open rates, reply rates, click-throughs, and pipeline movement. Real-time. No waiting for weekly reports.
          </p>
          <span class="wf-card-detail">Opens · replies · clicks · live</span>
        </div>
      </div>

      <div class="wf-step" data-step>
        <div class="wf-node">7</div>
        <div class="wf-card">
          <div class="wf-card-header">
            <span class="wf-card-icon">CRM</span>
            <span class="wf-card-label">Step 07 — Connected</span>
          </div>
          <h3 class="wf-card-title">CRM Integration</h3>
          <p class="wf-card-desc">
            Every lead, every reply, every status change feeds directly into your existing CRM — HubSpot, Salesforce, Pipedrive, Notion, or Google Sheets. No copy-pasting. No manual updates.
          </p>
          <span class="wf-card-detail">Works with your existing tools</span>
        </div>
      </div>

    </div>
  </div>
</section>

<!-- RESULTS STRIP -->
<section class="wf-results">
  <div class="container container--narrow">
    <div class="wf-results-grid">
      <div class="wf-result-cell">
        <div class="wf-result-num">7</div>
        <div class="wf-result-label">Automated steps</div>
      </div>
      <div class="wf-result-cell">
        <div class="wf-result-num">150</div>
        <div class="wf-result-label">Emails/day/inbox</div>
      </div>
      <div class="wf-result-cell">
        <div class="wf-result-num">Daily</div>
        <div class="wf-result-label">Fresh leads scraped</div>
      </div>
      <div class="wf-result-cell">
        <div class="wf-result-num">0</div>
        <div class="wf-result-label">Manual steps for you</div>
      </div>
    </div>
  </div>
</section>

<!-- PROMISE -->
<section class="wf-promise">
  <div class="container container--narrow">
    <div class="wf-promise-box">
      <span class="wf-promise-badge">A real system</span>
      <h2 class="wf-promise-headline">This isn't a tool. It's a machine we run for you.</h2>
      <p class="wf-promise-sub">
        You don't need to learn software, manage campaigns, or hire SDRs. We set up the system, configure it for your market, and run it every day. You focus on closing the leads that come in.
      </p>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="wf-cta">
  <div class="container container--narrow">
    <h2 class="wf-cta-headline">Ready to see this in action?</h2>
    <p class="wf-cta-sub">
      Book a 20-minute call. We'll walk through how the system would work for your specific market and ICP.
    </p>
    <%= link_to book_call_path, class: "cta-button cta-button--primary cta-button--large" do %>
      Book a 20-min call →
    <% end %>
    <p class="wf-cta-note">No commitment. No pitch deck. Just a conversation.</p>
  </div>
</section>

<script>
  // Scroll-triggered step reveal animation
  document.addEventListener('DOMContentLoaded', function() {
    const steps = document.querySelectorAll('.wf-step[data-step]');

    if ('IntersectionObserver' in window) {
      const observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
          if (entry.isIntersecting) {
            entry.target.classList.add('wf-visible');
            observer.unobserve(entry.target);
          }
        });
      }, {
        threshold: 0.15,
        rootMargin: '0px 0px -60px 0px'
      });

      steps.forEach(function(step) {
        observer.observe(step);
      });
    } else {
      // Fallback: show all steps
      steps.forEach(function(step) {
        step.classList.add('wf-visible');
      });
    }
  });
</script>
